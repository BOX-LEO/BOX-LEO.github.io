<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Our Song</title>
  <style>
    :root{
      --bg:#0b0f1a;
      --card:#121a2a;
      --text:#e8eefc;
      --muted:#aab6d3;
      --accent:#7aa2ff;
      --line:rgba(255,255,255,.08);
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100vh;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 20% 10%, rgba(122,162,255,.18), transparent 55%),
        radial-gradient(900px 600px at 80% 30%, rgba(255,122,222,.10), transparent 60%),
        radial-gradient(900px 700px at 50% 90%, rgba(90,255,200,.08), transparent 55%),
        var(--bg);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    .wrap{
      max-width:980px;
      margin:0 auto;
      padding:28px 16px 40px;
      display:grid;
      gap:16px;
      grid-template-columns: 1fr;
    }
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius:18px;
      padding:18px;
      box-shadow: 0 20px 60px rgba(0,0,0,.35);
    }
    header{
      display:flex;
      gap:14px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .title{
      display:flex;
      flex-direction:column;
      gap:6px;
      min-width:260px;
    }
    h1{
      margin:0;
      font-size:22px;
      letter-spacing:.3px;
    }
    .sub{
      margin:0;
      color:var(--muted);
      font-size:13px;
      line-height:1.4;
    }

    .top{
      display:grid;
      gap:14px;
      grid-template-columns: 1fr;
      align-items:stretch;
    }
    @media (min-width: 860px){
      .top{ grid-template-columns: 360px 1fr; }
    }

    .cover{
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .cover img{
      width:100%;
      aspect-ratio: 1 / 1;
      object-fit:cover;
      border-radius:16px;
      border:1px solid var(--line);
      background:#0f1523;
    }

    .controls{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }
    button{
      appearance:none;
      border:1px solid var(--line);
      background:rgba(255,255,255,.06);
      color:var(--text);
      padding:10px 14px;
      border-radius:12px;
      cursor:pointer;
      font-weight:600;
      letter-spacing:.2px;
    }
    button:hover{ border-color:rgba(255,255,255,.18); }
    button:active{ transform: translateY(1px); }

    .pill{
      padding:8px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      color:var(--muted);
      font-size:12px;
      background:rgba(0,0,0,.12);
    }

    .row{
      display:flex;
      align-items:center;
      gap:10px;
      width:100%;
    }
    input[type="range"]{
      width:100%;
      accent-color: var(--accent);
    }
    .time{
      font-variant-numeric: tabular-nums;
      color:var(--muted);
      font-size:12px;
      min-width:92px;
      text-align:right;
    }

    .lyrics{
      height:420px;
      overflow:auto;
      border-radius:16px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.12);
      padding:14px 12px;
      scrollbar-width:none;
      -ms-overflow-style:none;
    }
    .lyrics::-webkit-scrollbar{
      display:none;
    }
    .line{
      padding:10px 10px;
      border-radius:12px;
      color:var(--muted);
      cursor:pointer;
      user-select:none;
      line-height:1.35;
      transition: background .15s, color .15s, transform .15s;
    }
    .line:hover{
      background:rgba(255,255,255,.05);
      color:rgba(232,238,252,.9);
    }
    .line.active{
      background:rgba(122,162,255,.16);
      color:var(--text);
      border:1px solid rgba(122,162,255,.35);
      transform: translateX(2px);
    }

    .footer{
      color:var(--muted);
      font-size:12px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    a{ color:var(--accent); text-decoration:none; }
    a:hover{ text-decoration:underline; }

    /* Fixed bottom player bar */
    .player-bar{
      position:fixed;
      bottom:0;
      left:0;
      right:0;
      background:linear-gradient(180deg, rgba(18,26,42,.97), rgba(11,15,26,.99));
      border-top:1px solid var(--line);
      padding:14px 20px;
      backdrop-filter:blur(16px);
      -webkit-backdrop-filter:blur(16px);
      z-index:1000;
      box-shadow: 0 -4px 30px rgba(0,0,0,.5);
    }
    .player-inner{
      max-width:980px;
      margin:0 auto;
      display:flex;
      align-items:center;
      gap:20px;
    }
    .play-btn{
      width:48px;
      height:48px;
      border-radius:50%;
      display:flex;
      align-items:center;
      justify-content:center;
      background:var(--accent);
      border:none;
      color:#0b0f1a;
      font-size:18px;
      flex-shrink:0;
      transition: transform .1s, background .15s;
    }
    .play-btn:hover{
      background:#8fb3ff;
      transform:scale(1.05);
    }
    .player-progress{
      flex:1;
      display:flex;
      align-items:center;
      gap:12px;
      min-width:0;
    }
    .player-progress input[type="range"]{
      flex:1;
      min-width:80px;
    }
    .player-time{
      font-variant-numeric: tabular-nums;
      color:var(--muted);
      font-size:12px;
      min-width:90px;
      text-align:center;
    }
    .player-volume{
      display:flex;
      align-items:center;
      gap:8px;
      flex-shrink:0;
    }
    .player-volume input[type="range"]{
      width:80px;
    }
    .vol-icon{
      color:var(--muted);
      font-size:16px;
      cursor:pointer;
      width:20px;
      text-align:center;
    }
    @media (max-width: 600px){
      .player-inner{
        flex-wrap:wrap;
        gap:12px;
      }
      .player-progress{
        order:3;
        width:100%;
      }
      .player-volume input[type="range"]{
        width:50px;
      }
    }
    body{
      padding-bottom:90px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <header>
        <div class="title">
          <h1 id="songTitle">Our Song</h1>
          <p class="sub" id="songSub">A small website to play one song, with rolling lyrics.</p>
        </div>
        <div class="pill" id="status">Ready</div>
      </header>
    </div>

    <div class="card top">
      <div class="cover">
        <img id="coverImg" src="assets/cover.jpg" alt="Cover" onerror="this.style.display='none'">
        <div class="controls">
          <button id="scrollBtn" type="button">Auto Scroll: On</button>
          <span class="pill" id="hint">Tip: click a lyric line to seek.</span>
        </div>
        <!-- Audio element (hidden, controlled by bottom player bar) -->
        <audio id="audio" preload="metadata">
          <source src="assets/song.mp3" type="audio/mpeg" />
        </audio>
      </div>

      <div>
        <div class="lyrics" id="lyricsBox" aria-label="Rolling lyrics"></div>
      </div>
    </div>

    <div class="card footer">
      <div>Host: GitHub Pages. Files: index.html + assets/song.mp3.</div>
      <div>Edit lyrics timestamps inside this file.</div>
    </div>
  </div>

  <!-- Fixed bottom player bar -->
  <div class="player-bar">
    <div class="player-inner">
      <button id="playBtn" class="play-btn" type="button">â–¶</button>
      <div class="player-progress">
        <input id="seek" type="range" min="0" max="1000" value="0" />
        <div class="player-time" id="timeLabel">0:00 / 0:00</div>
      </div>
      <div class="player-volume">
        <span class="vol-icon" id="volIcon">ðŸ”Š</span>
        <input id="vol" type="range" min="0" max="1" step="0.01" value="0.9" />
      </div>
    </div>
  </div>

  <script>
    // ====== 1) EDIT THESE ======
    const META = {
      title: "code214",
      subtitle: "",
    };

    // Timestamps are in seconds.
    // Replace text with your lyrics.
    // Add more lines as you like.
    const LYRICS = [
      { t: 0.0,   text: "..." },
      { t: 11.9,  text: "ä¸€ç›´ä¸æ•¢ å’Œä½ å¯¹è§† ä¹Ÿä¸æ•¢ say Hi" },
      { t: 14.9,  text: "çœ¼ç¥žä¸åœ é—ªèº² æ—¶é—´è¿‡çš„ é£žå¿«" },
      { t: 17.9,  text: "è¿˜æ²¡å’Œä½ è¯´è¯ å¯èƒ½æ³¨å®šå¤±è´¥" },
      { t: 20.9,  text: "ä¸çŸ¥å¦‚ä½•æŒ½ç•™ ä½ å·²ç»å‡†å¤‡ç¦»å¼€" },
      { t: 23.9,  text: "é‚£å¤©ä½ èµ°åŽ æˆ‘èƒ½é‡çž¬é—´è€—å°½" },
      { t: 26.9,  text: "ä¸çŸ¥ä½ é‚£æ™š æœ‰æ²¡æœ‰çŽ©çš„å°½å…´" },
      { t: 29.9,  text: "æ˜Žæ˜Žæƒ³é è¿‘ ä½†ä¸€ç›´çŠ¹è±«ä¸åœ" },
      { t: 32.9,  text: "å¤šäºä½ ç§ä¿¡ æ‰æŠŠæˆ‘ä»¬è·ç¦»æ‹‰è¿‘" },
      { t: 35.9,  text: "æ”¶åˆ°äº†æ¶ˆæ¯ æ˜¯ä½ å¤¸æˆ‘è¶…å¸…" },
      { t: 38.9,  text: "æˆ‘å‘ä½ å¦ç™½ æœ‰äº›å¿ƒæ½®æ¾Žæ¹ƒ" },
      { t: 41.9,  text: "ä¸æƒ³å†é”™è¿‡ ä½ çš„æ¯æ¡åŠ¨æ€" },
      { t: 44.9,  text: "æ¸æ¸å¼€å§‹å¹»æƒ³æœ‰å½¼æ­¤çš„æœªæ¥" },
      { t: 47.9,  text: "é»˜é»˜å…³æ³¨ä½ çš„ä¸»é¡µ ä¸æƒ³è®©ä½ å‘çŽ°" },
      { t: 50.9,  text: "ç¤¾äº¤åª’ä½“ç»™ä½ ç§ä¿¡ èº²åœ¨å±å¹•åŽé¢" },
      { t: 53.9,  text: "ä¸‹æ¬¡æ¼”å‡ºå°½é‡å‡ºçŽ° è¿™æ˜¯ä½ çš„ç•™è¨€" },
      { t: 56.9,  text: "æ— æ³•æŽ§åˆ¶èƒ¡æ€ä¹±æƒ³ æœŸå¾…ä¸‹æ¬¡ç›¸è§" },
      { t: 59.9,  text: "..." },
      { t: 71.9,  text: "åœ¨å°ä¸Š å¾ˆç´§å¼  çœ‹åˆ°ä½ æˆ‘å°±èƒ½æ”¾å¿ƒ" },
      { t: 74.9,  text: "è®¤è¯†ä½  å¤§åŠå¹´ é‚£å¤©ç»ˆäºŽåŠ ä¸Šå¾®ä¿¡" },
      { t: 77.9,  text: "ä½ èº«å½± å¤ªè¿·äºº çž¬é—´æ·±æ·±åˆ»è¿›å¿ƒé‡Œ" },
      { t: 80.9,  text: "ä¸æƒ³å¾ˆ å¿«æ‰¿è®¤ é¢å¯¹ä½ æˆ‘å¤±åŽ»è‡ªä¿¡" },
      { t: 83.9,  text: "å¬è¯´ä½  ä¼šå‚åŠ  ä¹‹åŽçš„èšé¤" },
      { t: 86.9,  text: "æƒ³è±¡ç€ å’Œä½ æ‰“ æ‹›å‘¼çš„ç”»é¢" },
      { t: 89.9,  text: "å¾ˆå®³æ€• ä¸è‡ªè§‰ è¡¨çŽ°çš„ä¸å®‰" },
      { t: 92.9,  text: "å¤šå¸Œæœ› æœ‰æœºä¼š å¤šçœ‹ä½ ä¸€çœ¼" },
      { t: 95.9,  text: "æ—¶é—´ ä¸€å¤©ä¸€å¤© ç»ˆäºŽå’Œä½ è§é¢" },
      { t: 98.9,  text: "ä¸æƒ³ è¢«ä½ å‘çŽ° æˆ‘é—ªèº²çš„è§†çº¿" },
      { t: 101.9, text: "ç»™ä½  å€’æ¯æ©™æ± éšè—å˜´è§’å¼§çº¿" },
      { t: 104.9, text: "æ¸¸æˆ åŠ é€Ÿæ—¶é—´ è½¬çœ¼å·²åˆ°ä¸‰ç‚¹" },
      { t: 107.9, text: "..." },
      { t: 131.9, text: "é‚£å¤©èµ· æˆ‘ä»¬çš„ æ²Ÿé€šå’Œäº¤æµéƒ½ é€æ¸å˜å¾—é¢‘ç¹" },
      { t: 134.9, text: "åªæƒ³è®© ä½ å°½å¿« äº†è§£æˆ‘ä¸å¸¸è§ æœ€çœŸå®žçš„ä¸€é¢" },
      { t: 137.9, text: "ä¸åˆ»æ„ ä¸è™šä¼ª æ²¡å®¢å¥—æ²¡æš§æ˜§ æœ‰äº›å£æ— é®æ‹¦" },
      { t: 140.9, text: "æ‰€æœ‰è¯ ä¸æŽ©é¥° ä¸è¯´è°Žä¸éšè— å¸Œæœ›ä½ èƒ½å–œæ¬¢" },
      { t: 143.9, text: "ä¸€ç›´ç›¯ç€æ‰‹æœºå±å¹• ä¸éœ€è¦ç¡è§‰åƒé¥­" },
      { t: 146.9, text: "ç²¾ç¥žä¸–ç•Œä¿æŒå…±é¸£ å¬ä½ æŽ¨èçš„æ­Œå•" },
      { t: 149.9, text: "ä¿æŒçœŸå®žæ²¡æœ‰æŠ€å·§ å…¨éƒ½é çœŸæƒ…å®žæ„Ÿ" },
      { t: 152.9, text: "å¯ä»¥å‹‡æ•¢åšæˆ‘è‡ªå·± è¿™å°±æ˜¯æ–°çš„èµ·ç‚¹" },
      { t: 155.9, text: "Yeah Yeah è¯é¢˜å˜å¾—æ·±å…¥" },
      { t: 158.9, text: "Yeah Yeah å¿ƒäº‹å‘ä½ å€¾è¯‰" },
      { t: 161.9, text: "Yeah Yeah äº†è§£æ¥æ—¶çš„è·¯" },
      { t: 164.9, text: "å†…å¿ƒä¸–ç•Œä¸°å¯Œ-æ˜¯ä½ ç‰¹æœ‰çš„å¤©èµ‹" },
      { t: 167.9, text: "æ—©å°±æƒ³è¯´ ä½ çš„çœ¼ç› å¾ˆè¿·äºº" },
      { t: 170.9, text: "å®ƒè£…ç€ ä¸–é—´ä¸‡ç‰©å’Œæ˜Ÿè¾°" },
      { t: 173.9, text: "ä¸çŸ¥ä¸è§‰ ä¸ºä½ çµé­‚ æ²‰æ²¦" },
      { t: 176.9, text: "é‡Œé¢æ˜¯ é«˜æ´çº¯å‡€çš„ç²¾ç¥ž" },
      { t: 179.9, text: "çŸ¥é“ä½ ä¸è®¤è·¯ æ·»åŠ ä½ çš„findmy" },
      { t: 182.9, text: "ä¸å¸Œæœ›æœ‰æ„å¤– æŽŒæ¡ä½ çš„åŠ¨æ€" },
      { t: 185.9, text: "æŽ¥é€æœºäº¤ç»™æˆ‘ èˆªç­å·éƒ½æ‹¿æ¥" },
      { t: 188.9, text: "ç§˜å¯†å¼€å§‹ç­–åˆ’ æŠŠæˆ‘å†…å¿ƒè¡¨ç™½" },
      { t: 191.9, text: "..." },
      { t: 215.9, text: "æˆ‘ä¸ä¼š éšéšä¾¿ä¾¿ å¯¹å¾…ä½ " },
      { t: 218.9, text: "ä¹Ÿä¸æƒ³ä½  å—ä¸€ç‚¹ç‚¹ å§”å±ˆ" },
      { t: 221.9, text: "æ¯ä¸ªæœªæ¥ èº«è¾¹çš„äºº æ˜¯ä½ " },
      { t: 224.9, text: "å¤©å—åœ°åŒ— å“ªé‡Œéƒ½æ˜¯ é£Žæ™¯" },
      { t: 227.9, text: "èŒ«èŒ«äººæµ·ç›¸é‡ ä¸‰ç”Ÿæœ‰å¹¸" },
      { t: 230.9, text: "æ¸æ¸å¼€å§‹ç›¸ä¿¡ å‘½ä¸­æ³¨å®š" },
      { t: 233.9, text: "å°Šé‡è‡ªå·±å†…å¿ƒ æ— æ¯”ç¡®ä¿¡" },
      { t: 236.9, text: "éžä½ èŽ«å±žå› ä¸º æˆ‘ä»¬çµé­‚ç›¸å¥‘" },
      { t: 239.9, text: "ä½ æœ‰å‘çŽ°ç¾Žå¥½ çš„çœ¼ç›" },
      { t: 242.9, text: "ä¹Ÿæœ‰æ¸©æš–ä¸–ç•Œ çš„å¿ƒçµ" },
      { t: 245.9, text: "ä½ å¤©çœŸæµªæ¼«è¿˜ å¾ˆç†æ€§" },
      { t: 248.9, text: "æˆç†ŸåŒ…è£¹é²œæ´» æ¸©æŸ”ä¸”åšå®š" },
      { t: 251.9, text: "æƒ…æ­Œä¸åœ¨ è‚‰éº»å˜æˆ ç”Ÿæ´»å†™ç…§" },
      { t: 254.9, text: "æˆ‘çŸ¥é“ ä½ æ‰«æ¸…æ‰€æœ‰çš„é—®å·" },
      { t: 257.9, text: "æˆ‘æƒ³è¦ æœªæ¥éƒ½æ˜¯ä½ çš„ç¾Žè²Œ" },
      { t: 260.9, text: "æƒ³ ç®€ç®€å•å•çˆ± é™ªä½ ä¸€ç›´åˆ°è€" },
      { t: 263.9, text: "ä»Šå¤©æ˜¯æˆ‘ä»¬è¿‡çš„ç¬¬ä¸€ä¸ªæƒ…äººèŠ‚" },
      { t: 266.9, text: "ç´§ç´§ç›¸æ‹¥å±žäºŽå½¼æ­¤ä¸ä¼šæœ‰ç¦»åˆ«" },
      { t: 269.9, text: "æ¸…çˆ½é€å½»è‡ªç”±çº¯ç²¹ä¿æŒå¤©çœŸæ— é‚ª" },
      { t: 272.9, text: "å…±åŒä¹¦å†™ä¸“å±žä½ æˆ‘ç”œèœœçš„æƒ…èŠ‚" },
      { t: 275.9, text: "TO MY DEAR Sylvia" },
      { t: 278.9, text: "I LOVE YOU" },
    ];
    // ==========================

    const audio = document.getElementById("audio");
    const playBtn = document.getElementById("playBtn");
    const scrollBtn = document.getElementById("scrollBtn");
    const seek = document.getElementById("seek");
    const vol = document.getElementById("vol");
    const volIcon = document.getElementById("volIcon");
    const timeLabel = document.getElementById("timeLabel");
    const lyricsBox = document.getElementById("lyricsBox");
    const status = document.getElementById("status");
    const songTitle = document.getElementById("songTitle");
    const songSub = document.getElementById("songSub");

    let autoScroll = true;
    let lastActiveIndex = -1;
    let userSeeking = false;
    let lastVolume = 0.9;

    songTitle.textContent = META.title;
    songSub.textContent = META.subtitle;

    function fmtTime(s) {
      if (!isFinite(s)) return "0:00";
      s = Math.max(0, Math.floor(s));
      const m = Math.floor(s / 60);
      const r = s % 60;
      return `${m}:${String(r).padStart(2, "0")}`;
    }

    function setStatus(txt) {
      status.textContent = txt;
    }

    function buildLyrics() {
      lyricsBox.innerHTML = "";
      LYRICS.forEach((line, i) => {
        const div = document.createElement("div");
        div.className = "line";
        div.dataset.index = String(i);
        div.dataset.time = String(line.t);
        div.textContent = line.text;
        div.addEventListener("click", () => {
          audio.currentTime = Math.max(0, line.t);
          if (audio.paused) audio.play().catch(() => {});
        });
        lyricsBox.appendChild(div);
      });
    }

    function activeLineIndex(t) {
      // Find last line with time <= t
      let lo = 0, hi = LYRICS.length - 1, ans = 0;
      while (lo <= hi) {
        const mid = (lo + hi) >> 1;
        if (LYRICS[mid].t <= t) { ans = mid; lo = mid + 1; }
        else { hi = mid - 1; }
      }
      return ans;
    }

    // Smooth scroll with easing
    let scrollAnimationId = null;
    function smoothScrollTo(element, target, duration = 600) {
      if (scrollAnimationId) cancelAnimationFrame(scrollAnimationId);

      const start = element.scrollTop;
      const distance = target - start;
      const startTime = performance.now();

      function easeOutCubic(t) {
        return 1 - Math.pow(1 - t, 3);
      }

      function animate(currentTime) {
        const elapsed = currentTime - startTime;
        const progress = Math.min(elapsed / duration, 1);

        element.scrollTop = start + distance * easeOutCubic(progress);

        if (progress < 1) {
          scrollAnimationId = requestAnimationFrame(animate);
        } else {
          scrollAnimationId = null;
        }
      }

      scrollAnimationId = requestAnimationFrame(animate);
    }

    function updateLyrics(t) {
      if (!LYRICS.length) return;

      const idx = activeLineIndex(t);
      if (idx === lastActiveIndex) return;

      const children = lyricsBox.children;
      if (lastActiveIndex >= 0 && children[lastActiveIndex]) {
        children[lastActiveIndex].classList.remove("active");
      }
      if (children[idx]) {
        children[idx].classList.add("active");
        if (autoScroll) {
          const lineEl = children[idx];
          const boxHeight = lyricsBox.clientHeight;
          const lineTop = lineEl.offsetTop;
          const lineHeight = lineEl.offsetHeight;
          const targetScroll = lineTop - (boxHeight / 2) + (lineHeight / 2);
          smoothScrollTo(lyricsBox, targetScroll, 500);
        }
      }
      lastActiveIndex = idx;
    }

    function updateSeek() {
      if (!audio.duration || userSeeking) return;
      const v = Math.round((audio.currentTime / audio.duration) * 1000);
      seek.value = String(Math.max(0, Math.min(1000, v)));
    }

    function updateTimeLabel() {
      timeLabel.textContent = `${fmtTime(audio.currentTime)} / ${fmtTime(audio.duration)}`;
    }

    // Events
    playBtn.addEventListener("click", async () => {
      if (audio.paused) {
        try {
          await audio.play();
        } catch (e) {
          setStatus("Tap again to allow audio.");
          return;
        }
      } else {
        audio.pause();
      }
    });

    scrollBtn.addEventListener("click", () => {
      autoScroll = !autoScroll;
      scrollBtn.textContent = `Auto Scroll: ${autoScroll ? "On" : "Off"}`;
    });

    vol.addEventListener("input", () => {
      audio.volume = Number(vol.value);
      lastVolume = audio.volume > 0 ? audio.volume : lastVolume;
      updateVolIcon();
    });

    volIcon.addEventListener("click", () => {
      if (audio.volume > 0) {
        lastVolume = audio.volume;
        audio.volume = 0;
        vol.value = "0";
      } else {
        audio.volume = lastVolume;
        vol.value = String(lastVolume);
      }
      updateVolIcon();
    });

    function updateVolIcon() {
      if (audio.volume === 0) {
        volIcon.textContent = "ðŸ”‡";
      } else if (audio.volume < 0.5) {
        volIcon.textContent = "ðŸ”‰";
      } else {
        volIcon.textContent = "ðŸ”Š";
      }
    }

    seek.addEventListener("pointerdown", () => { userSeeking = true; });
    seek.addEventListener("pointerup", () => { userSeeking = false; });

    seek.addEventListener("input", () => {
      if (!audio.duration) return;
      const ratio = Number(seek.value) / 1000;
      audio.currentTime = ratio * audio.duration;
      updateTimeLabel();
      updateLyrics(audio.currentTime);
    });

    audio.addEventListener("loadedmetadata", () => {
      setStatus("Loaded");
      updateTimeLabel();
    });

    audio.addEventListener("play", () => {
      playBtn.textContent = "â¸";
      setStatus("Playing");
    });

    audio.addEventListener("pause", () => {
      playBtn.textContent = "â–¶";
      setStatus("Paused");
    });

    audio.addEventListener("timeupdate", () => {
      updateSeek();
      updateTimeLabel();
      updateLyrics(audio.currentTime);
    });

    audio.addEventListener("ended", () => {
      setStatus("Finished");
      playBtn.textContent = "â–¶";
    });

    // Init
    buildLyrics();
    audio.volume = Number(vol.value);
    updateVolIcon();
    scrollBtn.textContent = "Auto Scroll: On";
  </script>
</body>
</html>
